version: "3.3"
services:
  theia_rewriter:
    image: "nginx:1.21"
    volumes:
      - ${ODOO_HOME}/images/theia_odoo_vim_integration/nginx.conf:/etc/nginx/nginx.conf
    # ports:
    #   - "4000:80"
  theia:
    build:
      context: ${ODOO_HOME}/images/theia_odoo_vim
      args:
        USER_ID: ${OWNER_UID}
        DOCKER_GROUP_ID: ${DOCKER_GROUP_ID}
    privileged: true
    # ports:
    #   - "3000:3000"
      # - "3030:3030" # debugging theia plugin
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock
      - ${CUSTOMS_DIR}:/home/project
      - ${ODOO_HOME}/images/theia_odoo_vim/add_vsix_files:/home/vsix_files
      - ~/.odoo:/home/theia/.odoo
      - ${ODOO_HOME}:/opt/odoo
      - ${ODOO_HOME/tools/snippets/snippets.vsix:/home/vsix_files/snippets.vsix