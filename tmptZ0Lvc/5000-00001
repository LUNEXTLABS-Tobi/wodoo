networks:
  default:
    external:
      name: home_marc_odoo_default
services:
  mail:
    build: $ODOO_HOME/machines/mail
    container_name: caetec11_mail
    env_file:
    - $ODOO_HOME/run/settings
    ports:
    - 25:25
    volumes:
    - mailstorage:/home/postmaster/Maildir
    - mailsqlite:/rc
    - $ODOO_HOME/machines/mail/bin:/opt/bin
  mail_check_sent_mails:
    build: $ODOO_HOME/machines/mail
    container_name: caetec11_mail_check_sent_mails
    env_file:
    - $ODOO_HOME/run/settings
    volumes:
    - $ODOO_HOME/data/mail/odoo_sent_mails/maildir:/home/postmaster/Maildir
    - $ODOO_HOME/data/mail/odoo_sent_mails/sqlite:/rc
  roundcube:
    build: $ODOO_HOME/machines/roundcube
    container_name: caetec11_roundcube
    env_file:
    - $ODOO_HOME/run/settings
    environment:
      MAIL_SERVER: mail
    ports:
    - 8000:80
  roundcube_check_sent_mails:
    build: $ODOO_HOME/machines/roundcube
    container_name: caetec11_roundcube_check_sent_mails
    env_file:
    - $ODOO_HOME/run/settings
    environment:
      MAIL_SERVER: mail_check_sent_mails
version: '3.5'
volumes:
  mailsqlite: null
  mailstorage: null

